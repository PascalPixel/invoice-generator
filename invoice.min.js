$(document).ready(function(){function t(){$("#items").append(m),i()}function i(){var t,i=$("#currency").val()
t="USD"==i?"$":"CNY"==i?"&yen;":"EUR"==i?"&euro;":"GBP"==i?"&pound;":"&yen;",$(".currency").html(t)}function e(){u=Number($("#rate-amount").val()),d=Number($("#mile-amount").val()),r=Number($("#tax-amount").val()),$("#tax-print").html("Tax "+r+"%")}function s(t){return Math.round(100*t)/100}function n(){$("#invoice").find(".hours").each(function(){$(this).closest(".row").find(".itemtotal").html(s($(this).val()*u))})}function a(){$("#invoice").find(".fixed").each(function(){$(this).closest(".row").find(".itemtotal").html(s($(this).val()))})}function l(){$("#invoice").find(".quantity").each(function(){var t=$(this).closest(".row").find(".item-input-quantity").val(),i=$(this).val()
$(this).closest(".row").find(".itemtotal").html(s(t*i))})}function o(){$("#invoice").find(".mileage").each(function(){$(this).closest(".row").find(".itemtotal").html(s($(this).val()*d))})}function c(){var t,c,u
i(),e(),n(),a(),l(),o(),t=0,$("#invoice").find(".itemtotal").each(function(){var i=parseInt($(this).text())
isNaN(i)||(t+=i)}),$(".subtotal").html(s(t)),c=t/100*r,$(".taxed").html(s(c)),u=s(t+c),$(".total").html(u)}var u,d,r,m='<li class="item" style="display:none;"><div class="row"><div class="col-lg-4"><input class="form-control" onclick="this.select()" type="text" value="Item description"></div><div class="col-xs-12 col-sm-4 col-lg-2"><select class="type"><option value="0"> Hours </option><option value="1"> Fixed </option><option value="2"> Quantity </option><option value="3"> Mileage </option></select><div class="caret"></div></div><div id="item-input" class="col-xs-4 col-sm-3 col-lg-2"><div class="input-type"><span class="currency"></span><input class="item-input-actual form-control hours" onclick="this.select()" type="text" value="0"><span class="percentage">%</span></div></div><div id="item-times" class="col-xs-4 col-sm-2 col-lg-2"><div class="input-type timest"><span class="times">x</span><input class="item-input-quantity form-control" onclick="this.select()" type="text" value="0"></div></div><div id="item-total" class="col-xs-4 col-sm-3 col-lg-2"><h4><span class="currency"></span><span class="itemtotal">0</span></h4></div></div></li>'
$(".plus").click(function(){t(),$("#items").find(".item:last").slideDown("fast")}),t(),$("#items").find(".item:last").show(),$("#currency").on("change",function(){i()}),$("#invoice").delegate(".item .type","change",function(){var t=$(this).closest(".row").find(".item-input-actual"),i=$(this).closest(".row").find(".input-type"),e=$(this).closest(".row").find(".timest")
0==$(this).val()?(t.removeClass("fixed quantity mileage").addClass("hours"),e.hide(),i.removeClass("money")):1==$(this).val()?(t.removeClass("hours quantity mileage").addClass("fixed"),e.hide(),i.addClass("money")):2==$(this).val()?(t.removeClass("fixed hours mileage").addClass("quantity"),e.show(),i.addClass("money")):(t.removeClass("fixed quantity hours").addClass("mileage"),e.hide(),i.removeClass("money")),c()}),$("#tax-amount").on("keyup",function(){$(".tax-bar").slideDown()}),c(),$("#invoice").on("keyup","input",function(){c()})})