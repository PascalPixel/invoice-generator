<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Bootstrap Invoice Generator</title>
<link href="http://netdna.bootstrapcdn.com/bootstrap/3.0.3/css/bootstrap.min.css" rel="stylesheet">
<style>
/* Remove list styling on invoice */
#invoice .row {
padding: 20px 0 10px;
}
#invoice ul {
list-style-type: none;
margin: 0;
padding: 0;
}
#invoice h3 {
margin: 0 0 10px;
}
/* Style rows of invoice */
#invoice li {
line-height: 32px;
border-bottom: solid 1px #dbdbdb;
}
#invoice #items li {
border-bottom-style: dashed;
}
/* Style input boxes for numbers */
#invoice .itemtotal {
float: right;
text-align: right;
}
/* Input margins */
#invoice input {
margin: 0px 0 10px 0;
}
#invoice input[type=checkbox] {
margin: -23px 0 0;
}
@media (min-width: 768px) {
  #invoice input[type=checkbox] {
  margin: 8px 0 0;
  }
}
/* Type boxes */
#invoice .input-type {
position: relative;
}
#invoice .input-type .currency, #invoice .input-type .percentage {
display: none;
}
#invoice .input-type.money input {
padding-left: 20px;
}
#invoice .input-type.money .currency {
position:absolute;
display: inherit;
color:#BBB;
left:10px;
top:1px;
}
#invoice .input-type.tax input {
padding-right: 20px;
}
#invoice .input-type.tax .percentage {
position:absolute;
display: inherit;
color:#BBB;
right:10px;
top:1px;
}
#invoice .caret {
display: none;
}
#invoice-number {
text-align: right;
}
#invoice #item-total {
text-align: right;
}
#invoice .plus {
  margin-top: -20px;
}

/* Theme Start */
* {
text-rendering: optimizeLegibility;
-webkit-font-smoothing: antialiased;
}
body {
background: #f5f5f5;
color: #555555;
}
h1, h2, h3, h4, h5 {
font-weight: bold;
color: #555555;
}
.btn, select {
background: #fafafa;
background: -webkit-linear-gradient(top, #ffffff, #eeeeee);
background: -moz-linear-gradient(top, #ffffff, #eeeeee);
background: -o-linear-gradient(top, #ffffff, #eeeeee);
background: linear-gradient(to bottom, #ffffff, #eeeeee);
border: 1px solid #CCC;
border-radius: 4px;
box-shadow: inset 0 1px 0px rgba(255, 255, 255, 0.4);
color: #555555;
cursor: pointer;
display: inline-block;
font-weight: bold;
outline: none;
text-shadow: 0 1px 0 white;
}
.btn:hover, select:hover {
color: #8d8d8d;
background: #fcfcfc;
background: -webkit-linear-gradient(top, #ffffff, #f3f3f3);
background: -moz-linear-gradient(top, #ffffff, #f3f3f3);
background: -o-linear-gradient(top, #ffffff, #f3f3f3);
background: linear-gradient(to bottom, #ffffff, #f3f3f3);
}
.btn:active, select:active {
color: #ffffff;
text-shadow: 0 1px 3px #888;
background: #d0d0d0;
box-shadow: inset 0px 1px 1px #cecece;
background: -webkit-linear-gradient(top, #cdcdcd, #e1e1e1);
background: -moz-linear-gradient(top, #cdcdcd, #e1e1e1);
background: -o-linear-gradient(top, #cdcdcd, #e1e1e1);
background: linear-gradient(top, #cdcdcd, #e1e1e1);
}
.btn-primary {
background: #1385e5;
background: -webkit-linear-gradient(top, #53b2fc, #1385e5);
background: -moz-linear-gradient(top, #53b2fc, #1385e5);
background: -o-linear-gradient(top, #53b2fc, #1385e5);
background: linear-gradient(to bottom, #53b2fc, #1385e5);
border-color: #075fa9;
color: white;
text-shadow: 0 1px 1px rgba(0, 0, 0, 0.4);
}
.btn-primary:hover {
background: #fcfcfc;
color: white;
background: -webkit-linear-gradient(top, #6ebefa, #1385e5);
background: -moz-linear-gradient(top, #6ebefa, #1385e5);
background: -o-linear-gradient(top, #6ebefa, #1385e5);
background: linear-gradient(to bottom, #6ebefa, #1385e5);
}
.btn-primary:active {
text-shadow: 0 -1px 0px #255f95;
background: #1977be;
box-shadow: inset 0px 1px 1px #1a4d7e;
background: -webkit-linear-gradient(top, #1977be, #1385e5);
background: -moz-linear-gradient(top, #1977be, #1385e5);
background: -o-linear-gradient(top, #1977be, #1385e5);
background: linear-gradient(top, #1977be, #1385e5);
}
select {
padding: 9px;
line-height: 1;
width: 100%;
-moz-appearance: none;
-webkit-appearance: none;
}
#invoice .caret {
position: absolute;
right: 25px;
top:17px;
display: inherit;
}
.box {
background: #fff;
padding: 0 20px;
border: #DDD solid 1px;
margin: -9px -15px 20px;
}
@media (min-width: 768px) {
  .box {
  margin: 0;
  border-radius: 7px;
  box-shadow: 0px 2px 2px rgba(0,0,0,0.1);
  }
  body {
  padding-top: 30px;
  }
}
/* Theme End */
</style>
</head>
<body>
<div class="container">
  <form id="invoice" name="invoice">
    <div class="row">
      <div class="col-sm-8">
        <div class="box">
          <ul>
            <li>
              <div class="row">
                <div class="col-xs-8 col-sm-9 col-lg-10">
                  <h3>Bootstrap Invoice Generator</h3>
                </div>
                <div class="col-xs-4 col-sm-3 col-lg-2">
                  <input class="form-control" id="invoice-number" onclick="this.select()" type="text" value="Invoice #">
                </div>
              </div>
            </li>
            <ul id="items">
            </ul>
            <li>
              <div class="row">
                <div class="col-xs-4 col-xs-offset-8">
                  <div class="btn btn-sm btn-block plus">Add item</div>
                </div>
              </div>
            </li>
            <li id="tax-bar" style="display:none">
              <span id="subtotal-print">Subtotal</span>
              <span class="subtotal pull-right">0</span>
            </li>
            <li id="tax-bar" style="display:none">
              <span id="tax-print">Tax 0%</span>
              <span class="taxed pull-right">0</span>
              <span class="currency pull-right"></span>
            </li>
            <li>
              <div class="row">
                <div class="col-xs-6">
                  <h3>Total cost</h3>
                </div>
                <div class="col-xs-6">
                  <h3></span><span class="total pull-right">0</span><span class="currency pull-right"></h3>
                </div>
              </div>
            </li>
          </ul>
          <div class="row">
            <div class="col-xs-4">
              <input class="btn btn-block" type="submit" value="Reset">
            </div>
            <div class="col-xs-8">
              <input class="btn btn-primary btn-block" type="submit" value="Submit">
            </div>
          </div>
        </div>
      </div>
      <div class="col-sm-4">
        <ul>
          <h4>Settings</h4>
          <li>
            <div class="row">
              <div class="col-sm-6">
                Currency
              </div>
              <div class="col-sm-6">
                <select id="currency" class="type">
                  <option value="USD">
                    USD $
                  </option>
                  <option value="CNY">
                    CNY &yen;
                  </option>
                  <option value="EUR">
                    EUR &euro;
                  </option>
                  <option value="GBP">
                    GBP &pound;
                  </option>
                  <option value="JPY">
                    JPY &yen;
                  </option>
                </select>
                <span class="caret"></span>
              </div>
            </div>
          </li>
          <li>
            <div class="row">
              <div class="col-sm-6">
                Hourly rate
              </div>
              <div class="col-sm-6">
                <div class="input-type money">
                  <span class="currency"></span>
                  <input class="form-control" id="rate-amount" onclick="this.select()" type="text" value="50">
                </div>
              </div>
            </div>
          </li>
          <li>
            <div class="row">
              <div class="col-sm-6">
                Cost per mile
              </div>
              <div class="col-sm-6">
                <div class="input-type money">
                  <span class="currency"></span>
                  <input class="form-control" id="mile-amount" onclick="this.select()" type="text" value="12">
                </div>
              </div>
            </div>
          </li>
          <li>
            <div class="row">
              <div class="col-sm-6">
                Taxable
              </div>
              <div class="col-sm-6">
                <input class="pull-right" id="tax-check" type="checkbox">
              </div>
            </div>
          </li>
          <li id="tax-input" style="display:none">
            <div class="row">
              <div class="col-sm-6">
                Tax
              </div>
              <div class="col-sm-6">
                <div class="input-type tax">
                  <input class="form-control" id="tax-amount" onclick="this.select()" type="text" value="0">
                  <span class="percentage">%</span>
                </div>
              </div>
            </div>
          </li>
        </ul>
      </div>
    </div>
  </form>
</div>
<script src="http://code.jquery.com/jquery-1.10.2.min.js"></script>
<script src="http://netdna.bootstrapcdn.com/bootstrap/3.0.3/js/bootstrap.min.js"></script>
<script src="http://cdnjs.cloudflare.com/ajax/libs/numeral.js/1.4.5/numeral.min.js"></script>
<script>
$(document).ready(function () {

//Item layout
var $item =
"<li class=\"item\" style=\"display:none;\">"+
  "<div class=\"row\">"+
    "<div class=\"col-lg-6\">"+
      "<input class=\"form-control\" onclick=\"this.select()\" type=\"text\" value=\"Item description\">"+
    "<\/div>"+
    "<div class=\"col-xs-4 col-lg-2\">"+
      "<select class=\"type\">"+
        "<option value=\"0\"> Hours <\/option>"+
        "<option value=\"1\"> Fixed <\/option>"+
        "<option value=\"2\"> Quantity <\/option>"+
        "<option value=\"3\"> Mileage <\/option>"+
      "<\/select>"+
      "<div class=\"caret\"><\/div>"+
    "<\/div>"+
    "<div id=\"item-input\" class=\"col-xs-4 col-lg-2\">"+
      "<div class=\"input-type\">"+
        "<span class=\"currency\"><\/span>"+
        "<input class=\"item-input-actual form-control hours\" onclick=\"this.select()\" type=\"text\" value=\"0\">"+
        "<span class=\"percentage\">%<\/span>"+
      "<\/div>"+
    "<\/div>"+
    "<div id=\"item-total\" class=\"col-xs-4 col-lg-2\">"+
      "<h4>"+
        "<span class=\"currency\"><\/span>"+
        "<span class=\"itemtotal\">0<\/span>"+
      "<\/h4>"+
    "<\/div>"+
  "<\/div>"+
"<\/li>";

//Add item
function appendItem() {
  $("#items").append($item);
  setCurrency();
}
//When plus is clicked add another item
$('.plus').click(function () {
  appendItem();
  $("#items").find(".item:last").slideDown("fast");
});
//Append first item on load
appendItem();
$("#items").find(".item:last").show();

//Setting currency
function setCurrency() {
  //Get currency from select input
  var currency = $('#currency').val();
  //Set currencySign var to be safe
  var currencySign;
  //Get currencySign based on currency selected
  if (currency == 'USD') {
    currencySign = '$';
  } else if (currency == 'CNY') {
    currencySign = '&yen;';
  } else if (currency == 'EUR') {
    currencySign = '&euro;';
  } else if (currency == 'GBP') {
    currencySign = '&pound;';
  } else {
    currencySign = '&yen;';
  }
  //Print currency on form
  $('.currency').html(currencySign);
}
$('#currency').on('change', function(){
  setCurrency();
});

//Change input box on item to type of input
$('#invoice .item .type').on('change', function () {
  var itemtotal = $(this).closest(".row").find(".item-input-actual");
  var inputType = $(this).closest(".row").find(".input-type");
  if ($(this).val() == 0) {
    itemtotal.removeClass("fixed quantity mileage").addClass("hours");
    inputType.removeClass("money");
  } else if ($(this).val() == 1) {
    itemtotal.removeClass("hours quantity mileage").addClass("fixed");
    inputType.addClass("money");
  } else if ($(this).val() == 2) {
    itemtotal.removeClass("fixed hours mileage").addClass("quantity");
    inputType.removeClass("money");
  } else {
    itemtotal.removeClass("fixed quantity hours").addClass("mileage");
    inputType.removeClass("money");
  }
  calcTotal();
});

//Open tax setting on selection of tax checkbox
$('#tax-check').on('change', function () {
  $('#tax-input, #tax-bar').slideToggle();
});

//Global variable settings
var rate;
var mile;
var tax;
//Settings
function settings() {
  //Get hourly rate from input
  rate = Number($('#rate-amount').val());
  //Get cost per mile from input
  mile = Number($('#mile-amount').val());
  //Get tax from input
  tax = Number($('#tax-amount').val());
  //Print the tax percentage
  $('#tax-print').html('Tax ' + tax + '%');
}

//2 decimal rounding
function twoDecimals(numberToRound) {
  return Math.round(numberToRound * 100) / 100;
}

//Minutes to decimal point
function minToDec(min) {
 var minDec = ((min / 3) * 5) / 100;
}

//Function to calculate based on hours
function calcHours() {
  $('#invoice').find('.hours').each(function(){
    $(this).closest(".row").find('.itemtotal').html((($(this).val()) * rate));
  });
}
//Function for fixed cost
function calcFixed() {
  $('#invoice').find('.fixed').each(function(){
    $(this).closest(".row").find('.itemtotal').html($(this).val());
  });
}

//Function for form calculation
function calcTotal() {
  setCurrency();
  settings();
  calcHours();
  calcFixed();
  //Add up all items
	var subtotal = 0;
	$('#invoice').find('.itemtotal').each(function () {
		var value = parseInt($(this).text());
		if (!isNaN(value)) subtotal += value;
	});
  //Print subtotal - Two decimals for print only
  $('.subtotal').html(twoDecimals(subtotal));
  //Calculate tax
  var taxed = (subtotal / 100 * tax);
  //Print tax - Two decimals for print only
  $('.taxed').html(twoDecimals(taxed));
  //Add up tax to subtotal - Actually round total up to two decimals
  var total = twoDecimals(subtotal + taxed);
  //Print total
  $('.total').html(total);
}
//Initial calculation on load
calcTotal();

//On input change recalculate
$('#invoice').on('keyup', 'input', function () {
  //Recalculate form
  calcTotal();
});

});
</script>
</body>
</html>